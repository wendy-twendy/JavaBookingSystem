<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.hotel.gui.controllers.InvoiceController"
            styleClass="main-container">

    <!-- Header -->
    <top>
        <VBox styleClass="header-container" alignment="CENTER">
            <HBox alignment="CENTER_LEFT" spacing="20">
                <Button text="Back to Bookings" styleClass="button, button-secondary"
                        onAction="#handleBack"/>
                <Label text="Invoice" styleClass="header-label" HBox.hgrow="ALWAYS"/>
            </HBox>
        </VBox>
    </top>

    <!-- Center Content - Invoice Card -->
    <center>
        <VBox alignment="CENTER">
            <padding>
                <Insets top="30" right="30" bottom="30" left="30"/>
            </padding>

            <!-- Invoice Card -->
            <VBox styleClass="card" spacing="15" minWidth="500" maxWidth="600" alignment="CENTER">
                <!-- Hotel Header -->
                <VBox alignment="CENTER" spacing="5">
                    <Label fx:id="hotelNameLabel" text="Grand Hotel" style="-fx-font-size: 24px; -fx-font-weight: bold;"/>
                    <Label text="INVOICE" style="-fx-font-size: 20px; -fx-text-fill: #2196F3; -fx-font-weight: bold;"/>
                </VBox>

                <Separator/>

                <!-- Invoice Info -->
                <VBox spacing="5">
                    <HBox spacing="10">
                        <Label text="Invoice #:" style="-fx-font-weight: bold;" minWidth="100"/>
                        <Label fx:id="invoiceIdLabel" text="-"/>
                    </HBox>
                    <HBox spacing="10">
                        <Label text="Booking #:" style="-fx-font-weight: bold;" minWidth="100"/>
                        <Label fx:id="bookingIdLabel" text="-"/>
                    </HBox>
                    <HBox spacing="10">
                        <Label text="Date:" style="-fx-font-weight: bold;" minWidth="100"/>
                        <Label fx:id="invoiceDateLabel" text="-"/>
                    </HBox>
                    <HBox spacing="10">
                        <Label text="Status:" style="-fx-font-weight: bold;" minWidth="100"/>
                        <Label fx:id="bookingStatusLabel" text="-"/>
                    </HBox>
                </VBox>

                <Separator/>

                <!-- Booking Details -->
                <VBox spacing="5">
                    <Label text="Booking Details" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                    <HBox spacing="10">
                        <Label text="Guest:" minWidth="100"/>
                        <Label fx:id="guestNameLabel" text="-"/>
                    </HBox>
                    <HBox spacing="10">
                        <Label text="Room:" minWidth="100"/>
                        <Label fx:id="roomLabel" text="-"/>
                    </HBox>
                    <HBox spacing="10">
                        <Label text="Check-in:" minWidth="100"/>
                        <Label fx:id="checkInLabel" text="-"/>
                    </HBox>
                    <HBox spacing="10">
                        <Label text="Check-out:" minWidth="100"/>
                        <Label fx:id="checkOutLabel" text="-"/>
                    </HBox>
                    <HBox spacing="10">
                        <Label text="Nights:" minWidth="100"/>
                        <Label fx:id="nightsLabel" text="-"/>
                    </HBox>
                </VBox>

                <Separator/>

                <!-- Cost Breakdown -->
                <VBox spacing="5">
                    <Label text="Cost Breakdown" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                    <HBox spacing="10">
                        <Label text="Subtotal:" minWidth="100"/>
                        <Label fx:id="subtotalLabel" text="-"/>
                    </HBox>
                    <HBox spacing="10">
                        <Label fx:id="vatRateLabel" text="VAT (10%):" minWidth="100"/>
                        <Label fx:id="vatLabel" text="-"/>
                    </HBox>
                    <HBox spacing="10">
                        <Label text="Total:" style="-fx-font-weight: bold;" minWidth="100"/>
                        <Label fx:id="totalLabel" text="-" style="-fx-font-weight: bold;"/>
                    </HBox>
                </VBox>

                <!-- Refund Section (conditionally visible) -->
                <VBox fx:id="refundSection" spacing="5" visible="false" managed="false">
                    <Separator/>
                    <VBox spacing="5" styleClass="alert-warning">
                        <Label text="Refund Information" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                        <HBox spacing="10">
                            <Label text="Refund:" minWidth="100"/>
                            <Label fx:id="refundLabel" text="-" style="-fx-text-fill: #4CAF50;"/>
                        </HBox>
                        <HBox spacing="10">
                            <Label text="Final Amount:" style="-fx-font-weight: bold;" minWidth="100"/>
                            <Label fx:id="finalAmountLabel" text="-" style="-fx-font-weight: bold; -fx-text-fill: #f44336;"/>
                        </HBox>
                    </VBox>
                </VBox>

                <Separator/>

                <!-- Print Button -->
                <Button text="Print Invoice" styleClass="button, button-primary"
                        onAction="#handlePrint" maxWidth="200"/>
            </VBox>
        </VBox>
    </center>
</BorderPane>
